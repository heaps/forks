<!DOCTYPE html>
<html>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

<h1>Balance List</h1>
Check Balance:
<button onclick="getBalance()">Get Balance</button><br><br>
<div id="status" style="color:#0000FF"></div>

<script>

var accounts = [];
accounts.push({'address':'0x72ac0213dCbe1F1970e583Cbb4894da3e88eCa1b','balance':0,'label':'Abel Sanchez'});
accounts.push({'address':'0x99CFeD49aaB910979458C05D9141730C8eae1897','balance':0,'label':'Arlington'});
accounts.push({'address':'0xdD5459F6B3cd2243C670dDF596c96f8505a66A98','balance':0,'label':'Boston'});
accounts.push({'address':'0x9e8Ca16B216df9B77aF0D31613c8292ffD292534','balance':0,'label':'Beverly'});
accounts.push({'address':'0x1Adb87D10A37FDdbfF5B3d18eaF1fC0dE484A300','balance':0,'label':'Braintree'});
accounts.push({'address':'0xa52a0EBe10BAEb5f82df1d85c0063Cc7F84Df9F9','balance':0,'label':'Brookline'});
accounts.push({'address':'0x5e62Ed277DCc6687eFbCf4dE3a1B3fF0eb21b3c3','balance':0,'label':'Cambridge'});
accounts.push({'address':'0x37C9Ce1cbF9219c37f64dE67e6ada77d4463c534','balance':0,'label':'Canton'});
accounts.push({'address':'0x40a7D53dCc801120fc68769bA83eaE983B7506fE','balance':0,'label':'Charlestown'});
accounts.push({'address':'0x73b6af0f7d1AD0B235aFb417Db12eC4FD5161C9a','balance':0,'label':'Clinton'});
accounts.push({'address':'0x52c638DFB53D74ebD4000560aba238D01D4Be42E','balance':0,'label':'Concord'});
accounts.push({'address':'0x5b4B77577C409168877b42Ed8D139A80B1a0552C','balance':0,'label':'Danvers'});
accounts.push({'address':'0x290020faC0Fd86739c4C682fFb2E71fdeD74D442','balance':0,'label':'Dartmouth'});
accounts.push({'address':'0xFC9869BcDD8E6e44f36887C153d8354101E67383','balance':0,'label':'Dedham'});
accounts.push({'address':'0xC15F9161d0e7597d6C98d5520F67f1A85f02599A','balance':0,'label':'Dennis'});
accounts.push({'address':'0x35c958d5075932e027Ef913667a29D9D71D935db','balance':0,'label':'Duxbury'});
accounts.push({'address':'0x2cB28Dd766D28b3Ab1e21F7fcFEb1a7779F09600','balance':0,'label':'Eastham'});
accounts.push({'address':'0x65a5195cd5346764Fd2d8759A44Cf8DE69406752','balance':0,'label':'Edgartown'});
accounts.push({'address':'0x42Ba5f3af0e904825eBB7de10DE58f3FA0e85343','balance':0,'label':'Everett'});
accounts.push({'address':'0xEd7031395f84E84fC33e1121b746eEa1FE54c151','balance':0,'label':'Fairhaven'});
accounts.push({'address':'0xBe7A656f8521aB7d7EDD4316A2453c6EfA94eCc3','balance':0,'label':'Falmouth'});
accounts.push({'address':'0x63A4B7EA73fA5D6e63a94Ad9cd4DabaEe7A310F1','balance':0,'label':'Hyannis'});
accounts.push({'address':'0x20dFA58DddA3a0256134e53aeE30dB5411F753D1','balance':0,'label':'Lexington'});
accounts.push({'address':'0x129F14E7D42F60282b8df7C3759Ba619A76337F1','balance':0,'label':'Malden'});
accounts.push({'address':'0xcbd80A7B1E4Fa67Da9d4addAb27D20D82b48Bf7d','balance':0,'label':'Medford'});
accounts.push({'address':'0xd2C5349C0D9ab587bCfCeA25E29AA7FaAD2fab56','balance':0,'label':'Milton'});
accounts.push({'address':'0xb153035C4aa11451B55d92B98b8B3Fee6333a8f3','balance':0,'label':'Natick'});
accounts.push({'address':'0xe99B17Da0BE9a8d10647aB4624BcE9954349c33F','balance':0,'label':'Newton'});
accounts.push({'address':'0x0F4e32a17B7056981D445Cf799484F8dFC5717C8','balance':0,'label':'Norwood'});
accounts.push({'address':'0xaEf4525B4303F9F60ecC70Baba18F710a4580219','balance':0,'label':'Wellesley'});
accounts.push({'address':'0x4D62ab0bf3216C1b893494b3E530a8e62cE53E61','balance':0,'label':'Watertown'});


// create an instance of web3 from MetaMask
if (typeof web3 !== 'undefined') {
  web3 = new Web3(web3.currentProvider);
} else {
  // set the provider you want from Web3.providers
  web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
}

// counter for array item
var counter = 0;

function getBalance(){

	accounts.forEach(function(account){

		// get the balance of account
		web3.eth.getBalance(account.address, function(err, res){
			counter++;

			// add balance to account object in accounts array
			// fromWei returns ether equivalent
			addBalance(account,web3.fromWei(res));

			// if all account data has returned, display data
			if (counter >= accounts.length){
				displayBalances();
			}
		});
	});
}

function displayBalances(){

	var table = '<table class="table" >' +
  					'<thead class="thead-light">' +
					    '<tr>' +
					      '<th scope="col">balance</th>' +
					      '<th scope="col">account</th>' +
					      '<th scope="col">address</th>' +
					    '</tr>' +
					 '</thead>' +
					 '<tbody>';

	accounts.forEach(function(account){
		table += '<tr>';
		table += '  <td>' + account.balance + '</td>';
		table += '  <td>' + account.label + '</td>';		
		table += '  <td>' + account.address + '</td>';				
		table += '</tr>';		
	});

  	table += '  </tbody>';
	table += '</table>';
	document.getElementById('status').innerHTML += table;

}

function addBalance(account, balance){
	account.balance = balance;
}


</script>
</html>

